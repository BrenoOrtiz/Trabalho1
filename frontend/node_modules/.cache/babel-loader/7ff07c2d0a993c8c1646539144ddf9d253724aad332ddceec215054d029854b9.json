{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Breno\\\\CS PUCPR\\\\Exp_Criativa2\\\\Trabalho1\\\\frontend\\\\src\\\\components\\\\Form.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport '../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Form = ({\n  userid,\n  closeModal\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    name: '',\n    age: '',\n    cpf: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n\n  // If editing, fetch user data\n  useEffect(() => {\n    if (userid !== -1) {\n      fetchUserData(userid);\n    }\n  }, [userid]);\n  const fetchUserData = async id => {\n    try {\n      setLoading(true);\n      const response = await fetch(`http://localhost:8800/${id}`);\n      if (!response.ok) {\n        throw new Error('Erro ao buscar dados do usuário');\n      }\n      const userData = await response.json();\n      setFormData({\n        name: userData.nome,\n        age: userData.idade,\n        cpf: userData.cpf\n      });\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    try {\n      let url = 'http://localhost:8800/';\n      let method = 'POST';\n      if (userid !== -1) {\n        url = `http://localhost:8800/${userid}`;\n        method = 'PUT';\n      }\n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      if (!response.ok) {\n        throw new Error(userid !== -1 ? 'Falha ao atualizar usuário' : 'Falha ao criar usuário');\n      }\n      const result = await response.json();\n      setSuccess(true);\n\n      // Close the modal after 1.5 seconds\n      setTimeout(() => {\n        closeModal();\n        // Refresh the page to show updated data\n        window.location.reload();\n      }, 1500);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-backdrop\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: userid !== -1 ? 'Editar Usuário' : 'Adicionar Usuário'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 27\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success-message\",\n        children: userid !== -1 ? 'Usuário atualizado com sucesso!' : 'Usuário criado com sucesso!'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: \"Nome:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          name: \"name\",\n          value: formData.name,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"age\",\n          children: \"Idade:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"age\",\n          name: \"age\",\n          value: formData.age,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cpf\",\n          children: \"CPF:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"cpf\",\n          name: \"cpf\",\n          value: formData.cpf,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: closeModal,\n          className: \"cancel-btn\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-btn\",\n          disabled: loading,\n          children: loading ? 'Processando...' : 'Salvar'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n};\n_s(Form, \"UEhDCuzFQe4AT74DXXM9OE4GhuU=\");\n_c = Form;\nexport default Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Form","userid","closeModal","_s","formData","setFormData","name","age","cpf","loading","setLoading","error","setError","success","setSuccess","fetchUserData","id","response","fetch","ok","Error","userData","json","nome","idade","err","message","handleChange","e","value","target","prevState","handleSubmit","preventDefault","url","method","headers","body","JSON","stringify","result","setTimeout","window","location","reload","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","onChange","required","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Breno/CS PUCPR/Exp_Criativa2/Trabalho1/frontend/src/components/Form.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../App.css';\r\n\r\nconst Form = ({ userid, closeModal }) => {\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        age: '',\r\n        cpf: ''\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [success, setSuccess] = useState(false);\r\n    \r\n    // If editing, fetch user data\r\n    useEffect(() => {\r\n        if (userid !== -1) {\r\n            fetchUserData(userid);\r\n        }\r\n    }, [userid]);\r\n    \r\n    const fetchUserData = async (id) => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await fetch(`http://localhost:8800/${id}`);\r\n            \r\n            if (!response.ok) {\r\n                throw new Error('Erro ao buscar dados do usuário');\r\n            }\r\n            \r\n            const userData = await response.json();\r\n            setFormData({\r\n                name: userData.nome,\r\n                age: userData.idade,\r\n                cpf: userData.cpf\r\n            });\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prevState => ({\r\n            ...prevState,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        try {\r\n            let url = 'http://localhost:8800/';\r\n            let method = 'POST';\r\n            \r\n            if (userid !== -1) {\r\n                url = `http://localhost:8800/${userid}`;\r\n                method = 'PUT';\r\n            }\r\n            \r\n            const response = await fetch(url, {\r\n                method,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(formData)\r\n            });\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(userid !== -1 ? 'Falha ao atualizar usuário' : 'Falha ao criar usuário');\r\n            }\r\n            \r\n            const result = await response.json();\r\n            setSuccess(true);\r\n            \r\n            // Close the modal after 1.5 seconds\r\n            setTimeout(() => {\r\n                closeModal();\r\n                // Refresh the page to show updated data\r\n                window.location.reload();\r\n            }, 1500);\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"modal-backdrop\">\r\n            <form className=\"form\" onSubmit={handleSubmit}>\r\n                <h3>{userid !== -1 ? 'Editar Usuário' : 'Adicionar Usuário'}</h3>\r\n                \r\n                {error && <div className=\"error-message\">{error}</div>}\r\n                {success && <div className=\"success-message\">\r\n                    {userid !== -1 ? 'Usuário atualizado com sucesso!' : 'Usuário criado com sucesso!'}\r\n                </div>}\r\n                \r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"name\">Nome:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"name\"\r\n                        name=\"name\"\r\n                        value={formData.name}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"age\">Idade:</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"age\"\r\n                        name=\"age\"\r\n                        value={formData.age}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"cpf\">CPF:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"cpf\"\r\n                        name=\"cpf\"\r\n                        value={formData.cpf}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"form-actions\">\r\n                    <button type=\"button\" onClick={closeModal} className=\"cancel-btn\">Cancelar</button>\r\n                    <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\r\n                        {loading ? 'Processando...' : 'Salvar'}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Form;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}